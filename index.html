<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Connect Four với Alpha-Beta Pruning</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --red-piece: #ef4444;
            --yellow-piece: #fbbf24;
            --background: #0f172a;
            --card-bg: #1e293b;
            --text-color: #f8fafc;
            --text-secondary: #94a3b8;
            --border-radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', Arial, sans-serif;
            background-color: var(--background);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .container {
                grid-template-columns: 1fr 1fr;
            }
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            background: linear-gradient(to right, var(--red-piece), var(--yellow-piece));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .game-section {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #status {
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .current-player {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
        }

        .red-indicator {
            background-color: var(--red-piece);
        }

        .yellow-indicator {
            background-color: var(--yellow-piece);
        }

        .column-indicators {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 5px;
        }

        .column-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 30px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .column-indicator:hover {
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .column-indicator svg {
            width: 20px;
            height: 20px;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            background: var(--primary-color);
            padding: 10px;
            border-radius: var(--border-radius);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .cell {
            aspect-ratio: 1/1;
            background: var(--card-bg);
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s;
            position: relative;
            box-shadow: inset 0 2px 3px rgba(0, 0, 0, 0.3);
        }

        .cell:hover {
            background: #2a3a50;
        }

        .cell.red {
            background: var(--red-piece);
            box-shadow: inset 0 -3px 0 rgba(0, 0, 0, 0.2), 0 0 10px rgba(239, 68, 68, 0.5);
        }

        .cell.yellow {
            background: var(--yellow-piece);
            box-shadow: inset 0 -3px 0 rgba(0, 0, 0, 0.2), 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .cell.red::after, .cell.yellow::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 15%;
            width: 30%;
            height: 30%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            background: var(--secondary-color);
        }

        button svg {
            width: 18px;
            height: 18px;
        }

        .instructions-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            height: fit-content;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            max-height: 80vh;
        }

        .instructions-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .instructions-header svg {
            width: 24px;
            height: 24px;
        }

        .instructions-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
        }

        .tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--text-color);
        }

        .tab:not(.active) {
            color: var(--text-secondary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .red-player {
            background-color: var(--red-piece);
        }

        .yellow-player {
            background-color: var(--yellow-piece);
        }

        .instructions-list {
            margin-left: 20px;
            margin-top: 10px;
        }

        .instructions-list li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .game-result {
            background-color: rgba(15, 23, 42, 0.8);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            margin-top: 20px;
            display: none;
        }

        .game-result.visible {
            display: block;
        }

        .result-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .result-title svg {
            width: 24px;
            height: 24px;
        }

        .illustration {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 15px;
            margin: 15px 0;
        }

        .illustration-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .board-illustration {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            background: var(--primary-color);
            padding: 8px;
            border-radius: 8px;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
        }

        .cell-illustration {
            aspect-ratio: 1/1;
            background: var(--card-bg);
            border-radius: 50%;
            position: relative;
        }

        .cell-illustration.red {
            background: var(--red-piece);
        }

        .cell-illustration.yellow {
            background: var(--yellow-piece);
        }

        .cell-illustration.highlight {
            box-shadow: 0 0 0 2px white;
        }

        .arrow-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 15px 0;
        }

        .arrow-down {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid var(--red-piece);
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(10px);
            }
        }

        .win-pattern {
            margin: 20px 0;
        }

        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .pattern-item {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
        }

        .pattern-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .pattern-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            background: var(--primary-color);
            padding: 8px;
            border-radius: 8px;
            width: 100%;
            margin: 0 auto;
        }

        .horizontal-pattern {
            grid-template-rows: repeat(1, 1fr);
        }

        .vertical-pattern {
            grid-template-rows: repeat(4, 1fr);
            grid-template-columns: repeat(1, 1fr);
        }

        .diagonal-up-pattern, .diagonal-down-pattern {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 4px;
            background: var(--primary-color);
            padding: 8px;
            border-radius: 8px;
        }

        .diagonal-cell {
            aspect-ratio: 1/1;
            background: var(--card-bg);
            border-radius: 50%;
        }

        .diagonal-cell.red {
            background: var(--red-piece);
        }

        .strategy-illustration {
            margin: 20px 0;
        }

        .strategy-board {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 4px;
            background: var(--primary-color);
            padding: 8px;
            border-radius: 8px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
        }

        .strategy-cell {
            aspect-ratio: 1/1;
            background: var(--card-bg);
            border-radius: 50%;
            position: relative;
        }

        .strategy-cell.red {
            background: var(--red-piece);
        }

        .strategy-cell.yellow {
            background: var(--yellow-piece);
        }

        .strategy-cell.next-move {
            background: var(--card-bg);
            position: relative;
        }

        .strategy-cell.next-move::after {
            content: '?';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .strategy-cell.winning-move {
            background: var(--card-bg);
            position: relative;
        }

        .strategy-cell.winning-move::after {
            content: '!';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--red-piece);
        }

        .strategy-description {
            margin-top: 15px;
            color: var(--text-secondary);
        }

        @media (max-width: 600px) {
            .board {
                gap: 5px;
                padding: 8px;
            }

            h1 {
                font-size: 2rem;
            }

            .pattern-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Connect Four</h1>
        <p class="subtitle">Trò chơi chiến thuật với AI thông minh</p>
    </header>

    <div class="container">
        <div class="game-section">
            <div id="status">
                <div class="current-player">
                    <span class="player-indicator red-indicator"></span>
                    <span id="status-text">Lượt của bạn (Đỏ)</span>
                </div>
                <div>
                    <button id="instructions-button" aria-label="Hướng dẫn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="column-indicators" id="column-indicators">
                <!-- Column indicators will be generated by JavaScript -->
            </div>

            <div class="board" id="board">
                <!-- Cells will be generated by JavaScript -->
            </div>

            <div class="game-result" id="game-result">
                <div class="result-title">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                        <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                        <path d="M4 22h16"></path>
                        <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                        <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                        <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                    </svg>
                    <span id="result-text">Bạn thắng!</span>
                </div>
                <button onclick="resetGame()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                        <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path>
                        <path d="M16 21h5v-5"></path>
                    </svg>
                    Chơi lại
                </button>
            </div>

            <div class="controls">
                <button onclick="resetGame()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                        <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path>
                        <path d="M16 21h5v-5"></path>
                    </svg>
                    Chơi lại
                </button>
            </div>
        </div>

        <div class="instructions-card">
            <div class="instructions-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <h2>Hướng dẫn chi tiết</h2>
            </div>

            <div class="instructions-tabs">
                <div class="tab active" data-tab="rules">Cách chơi</div>
                <div class="tab" data-tab="patterns">Cách thắng</div>
                <div class="tab" data-tab="strategy">Chiến thuật</div>
            </div>

            <div class="tab-content active" id="rules">
                <h3>Mục tiêu</h3>
                <p>Nối 4 quân liên tiếp theo hàng ngang, dọc hoặc chéo trước khi AI làm được điều đó.</p>
                
                <div class="illustration">
                    <h4 class="illustration-title">Cách thả quân</h4>
                    <p>Quân cờ sẽ rơi xuống vị trí thấp nhất trong cột bạn chọn, giống như có trọng lực.</p>
                    
                    <div class="arrow-animation">
                        <div class="player-color red-player" style="margin-bottom: 5px;"></div>
                        <div class="arrow-down"></div>
                    </div>
                    
                    <div class="board-illustration">
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration highlight"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration yellow"></div>
                    </div>
                    
                    <p style="margin-top: 10px; text-align: center; color: var(--text-secondary);">
                        Khi bạn click vào cột 4, quân cờ đỏ sẽ rơi xuống vị trí được đánh dấu
                    </p>
                </div>
                
                <h3 style="margin-top: 15px;">Người chơi</h3>
                <div class="player-info">
                    <div class="player-color red-player"></div>
                    <div>
                        <strong>Bạn (Đỏ)</strong>
                        <p>Click vào cột để thả quân</p>
                    </div>
                </div>
                <div class="player-info">
                    <div class="player-color yellow-player"></div>
                    <div>
                        <strong>AI (Vàng)</strong>
                        <p>Tự động đi sau bạn</p>
                    </div>
                </div>

                <h3 style="margin-top: 15px;">Luật chơi</h3>
                <ul class="instructions-list">
                    <li>Bạn và AI lần lượt thả quân vào bảng 7x6.</li>
                    <li>Quân cờ sẽ rơi xuống vị trí thấp nhất trong cột bạn chọn.</li>
                    <li>Bạn không thể đặt quân vào vị trí bất kỳ - quân cờ phải rơi từ trên xuống.</li>
                    <li>Người đầu tiên tạo được 4 quân liên tiếp theo hàng ngang, dọc hoặc chéo sẽ thắng.</li>
                    <li>Nếu bảng đầy mà không ai thắng, trò chơi sẽ kết thúc với kết quả hòa.</li>
                </ul>
                
                <div class="illustration">
                    <h4 class="illustration-title">Ví dụ về lượt đi</h4>
                    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
                        <div style="text-align: center;">
                            <p style="margin-bottom: 5px;">Bước 1: Bạn chọn cột</p>
                            <div class="board-illustration" style="max-width: 120px;">
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration highlight"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <p style="margin-bottom: 5px;">Bước 2: Quân rơi xuống</p>
                            <div class="board-illustration" style="max-width: 120px;">
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration red"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <p style="margin-bottom: 5px;">Bước 3: Lượt của AI</p>
                            <div class="board-illustration" style="max-width: 120px;">
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration yellow"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration red"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                                <div class="cell-illustration"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="patterns">
                <h3>Cách thắng</h3>
                <p>Để thắng, bạn cần tạo được 4 quân liên tiếp theo một trong các hướng sau:</p>
                
                <div class="pattern-grid">
                    <div class="pattern-item">
                        <h4 class="pattern-title">Ngang</h4>
                        <div class="pattern-board horizontal-pattern">
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                        </div>
                    </div>
                    
                    <div class="pattern-item">
                        <h4 class="pattern-title">Dọc</h4>
                        <div class="pattern-board vertical-pattern">
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                            <div class="cell-illustration red"></div>
                        </div>
                    </div>
                    
                    <div class="pattern-item">
                        <h4 class="pattern-title">Chéo lên</h4>
                        <div class="diagonal-up-pattern">
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                            
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                        </div>
                    </div>
                    
                    <div class="pattern-item">
                        <h4 class="pattern-title">Chéo xuống</h4>
                        <div class="diagonal-down-pattern">
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                            <div class="diagonal-cell"></div>
                            
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell"></div>
                            <div class="diagonal-cell red"></div>
                        </div>
                    </div>
                </div>
                
                <div class="illustration">
                    <h4 class="illustration-title">Ví dụ về trận thắng</h4>
                    <div class="board-illustration">
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration"></div>
                        
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration red"></div>
                        <div class="cell-illustration yellow"></div>
                        <div class="cell-illustration"></div>
                        <div class="cell-illustration"></div>
                    </div>
                    <p style="margin-top: 10px; text-align: center; color: var(--text-secondary);">
                        Người chơi đỏ thắng với 4 quân liên tiếp theo hàng ngang
                    </p>
                </div>
            </div>

            <div class="tab-content" id="strategy">
                <h3>Chiến thuật cơ bản</h3>
                <p>Dưới đây là một số chiến thuật giúp bạn chiến thắng:</p>
                
                <div class="strategy-illustration">
                    <h4 class="illustration-title">1. Kiểm soát cột giữa</h4>
                    <div class="strategy-board">
                        <!-- Row 1 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 2 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 3 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 4 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 5 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 6 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                    </div>
                    <p class="strategy-description">
                        Cột giữa (cột 4) cho phép bạn tạo được nhiều đường thắng nhất. Ưu tiên đặt quân ở cột này.
                    </p>
                </div>
                
                <div class="strategy-illustration">
                    <h4 class="illustration-title">2. Tạo mối đe dọa kép</h4>
                    <div class="strategy-board">
                        <!-- Row 1 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 2 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 3 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 4 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell winning-move"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 5 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 6 -->
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell"></div>
                    </div>
                    <p class="strategy-description">
                        Tạo ra tình huống đối thủ không thể chặn cả hai đường thắng cùng lúc. Trong ví dụ này, nếu đặt quân đỏ vào vị trí đánh dấu "!", bạn sẽ có hai cơ hội để thắng ở lượt tiếp theo.
                    </p>
                </div>
                
                <div class="strategy-illustration">
                    <h4 class="illustration-title">3. Chặn đối thủ</h4>
                    <div class="strategy-board">
                        <!-- Row 1 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 2 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 3 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 4 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 5 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell next-move"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        
                        <!-- Row 6 -->
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell yellow"></div>
                        <div class="strategy-cell red"></div>
                        <div class="strategy-cell"></div>
                    </div>
                    <p class="strategy-description">
                        Luôn chú ý khi đối thủ có 3 quân liên tiếp. Trong ví dụ này, bạn cần đặt quân đỏ vào vị trí đánh dấu "?" để chặn AI thắng ở lượt tiếp theo.
                    </p>
                </div>
                
                <h3 style="margin-top: 20px;">Về AI</h3>
                <p>AI trong trò chơi này sử dụng thuật toán Alpha-Beta Pruning, một kỹ thuật tìm kiếm nâng cao giúp AI đưa ra quyết định tối ưu bằng cách dự đoán nhiều bước đi phía trước.</p>
                <p style="margin-top: 10px;">AI sẽ:</p>
                <ul class="instructions-list">
                    <li>Tìm kiếm cơ hội để tạo 4 quân liên tiếp</li>
                    <li>Chặn bạn khi bạn có 3 quân liên tiếp</li>
                    <li>Đánh giá nhiều nước đi có thể và chọn nước đi tốt nhất</li>
                    <li>Cố gắng kiểm soát vị trí trung tâm</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const rows = 6;
        const cols = 7;
        let board = Array(rows).fill().map(() => Array(cols).fill(''));
        let currentPlayer = 'red';
        let gameActive = true;

        // Tạo bảng
        const boardElement = document.getElementById('board');
        for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.setAttribute('data-row', row);
                cell.setAttribute('data-col', col);
                cell.addEventListener('click', () => handleCellClick(col));
                boardElement.appendChild(cell);
            }
        }

        // Tạo chỉ báo cột
        const columnIndicatorsElement = document.getElementById('column-indicators');
        for (let col = 0; col < cols; col++) {
            const indicator = document.createElement('div');
            indicator.classList.add('column-indicator');
            indicator.setAttribute('data-col', col);
            indicator.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m6 9 6 6 6-6"/>
                </svg>
            `;
            indicator.addEventListener('click', () => handleCellClick(col));
            columnIndicatorsElement.appendChild(indicator);
        }

        // Xử lý click
        function handleCellClick(col) {
            if (!gameActive || currentPlayer !== 'red') return;
            const row = getLowestEmptyRow(col);
            if (row !== -1) {
                makeMove(row, col, 'red');
                if (gameActive) {
                    setTimeout(aiMove, 500);
                }
            }
        }

        // Tìm hàng trống thấp nhất trong cột
        function getLowestEmptyRow(col) {
            for (let row = rows - 1; row >= 0; row--) {
                if (board[row][col] === '') return row;
            }
            return -1;
        }

        // Thực hiện nước đi
        function makeMove(row, col, player) {
            board[row][col] = player;
            const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
            cell.classList.add(player);
            
            if (checkWin(player)) {
                document.getElementById('status-text').textContent = `${player === 'red' ? 'Bạn' : 'AI'} thắng!`;
                document.getElementById('result-text').textContent = `${player === 'red' ? 'Bạn' : 'AI'} thắng!`;
                document.getElementById('game-result').classList.add('visible');
                gameActive = false;
            } else if (board.every(row => row.every(cell => cell !== ''))) {
                document.getElementById('status-text').textContent = 'Hòa!';
                document.getElementById('result-text').textContent = 'Hòa!';
                document.getElementById('game-result').classList.add('visible');
                gameActive = false;
            } else {
                currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
                document.getElementById('status-text').textContent = `Lượt của ${currentPlayer === 'red' ? 'bạn (Đỏ)' : 'AI (Vàng)'}`;
                
                // Update player indicator
                const indicator = document.querySelector('.player-indicator');
                indicator.classList.remove('red-indicator', 'yellow-indicator');
                indicator.classList.add(currentPlayer === 'red' ? 'red-indicator' : 'yellow-indicator');
            }
        }

        // Kiểm tra thắng
        function checkWin(player) {
            // Kiểm tra hàng ngang
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col <= cols - 4; col++) {
                    if (board[row].slice(col, col + 4).every(cell => cell === player)) return true;
                }
            }
            // Kiểm tra hàng dọc
            for (let col = 0; col < cols; col++) {
                for (let row = 0; row <= rows - 4; row++) {
                    if ([0, 1, 2, 3].every(i => board[row + i][col] === player)) return true;
                }
            }
            // Kiểm tra đường chéo (/)
            for (let row = 3; row < rows; row++) {
                for (let col = 0; col <= cols - 4; col++) {
                    if ([0, 1, 2, 3].every(i => board[row - i][col + i] === player)) return true;
                }
            }
            // Kiểm tra đường chéo (\)
            for (let row = 0; row <= rows - 4; row++) {
                for (let col = 0; col <= cols - 4; col++) {
                    if ([0, 1, 2, 3].every(i => board[row + i][col + i] === player)) return true;
                }
            }
            return false;
        }

        // Thuật toán Alpha-Beta Pruning
        function alphaBeta(board, depth, alpha, beta, isMaximizing) {
            if (checkWin('yellow')) return 100 - depth;
            if (checkWin('red')) return depth - 100;
            if (board.every(row => row.every(cell => cell !== ''))) return 0;
            if (depth >= 6) return 0; // Giới hạn độ sâu

            if (isMaximizing) {
                let bestScore = -Infinity;
                for (let col = 0; col < cols; col++) {
                    const row = getLowestEmptyRow(col);
                    if (row !== -1) {
                        board[row][col] = 'yellow';
                        let score = alphaBeta(board, depth + 1, alpha, beta, false);
                        board[row][col] = '';
                        bestScore = Math.max(score, bestScore);
                        alpha = Math.max(alpha, bestScore);
                        if (beta <= alpha) break;
                    }
                }
                return bestScore;
            } else {
                let bestScore = Infinity;
                for (let col = 0; col < cols; col++) {
                    const row = getLowestEmptyRow(col);
                    if (row !== -1) {
                        board[row][col] = 'red';
                        let score = alphaBeta(board, depth + 1, alpha, beta, true);
                        board[row][col] = '';
                        bestScore = Math.min(score, bestScore);
                        beta = Math.min(beta, bestScore);
                        if (beta <= alpha) break;
                    }
                }
                return bestScore;
            }
        }

        // AI chọn nước đi
        function aiMove() {
            let bestScore = -Infinity;
            let bestCol;
            for (let col = 0; col < cols; col++) {
                const row = getLowestEmptyRow(col);
                if (row !== -1) {
                    board[row][col] = 'yellow';
                    let score = alphaBeta(board, 0, -Infinity, Infinity, false);
                    board[row][col] = '';
                    if (score > bestScore) {
                        bestScore = score;
                        bestCol = col;
                    }
                }
            }
            const row = getLowestEmptyRow(bestCol);
            makeMove(row, bestCol, 'yellow');
        }

        // Reset game
        function resetGame() {
            board = Array(rows).fill().map(() => Array(cols).fill(''));
            currentPlayer = 'red';
            gameActive = true;
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('red', 'yellow');
            });
            document.getElementById('status-text').textContent = 'Lượt của bạn (Đỏ)';
            document.getElementById('game-result').classList.remove('visible');
            
            // Reset player indicator
            const indicator = document.querySelector('.player-indicator');
            indicator.classList.remove('yellow-indicator');
            indicator.classList.add('red-indicator');
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(tab.getAttribute('data-tab')).classList.add('active');
            });
        });

        // Instructions button
        document.getElementById('instructions-button').addEventListener('click', () => {
            const instructionsCard = document.querySelector('.instructions-card');
            instructionsCard.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
